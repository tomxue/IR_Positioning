diff --git a/DAQ.c b/DAQ.c
index 5993190..cecc59e 100644
--- a/DAQ.c
+++ b/DAQ.c
@@ -22,6 +22,8 @@
 #define false 0
 #define true 1
 
+#define SEND_DATA_COUNT 512
+
 //===============================================================================
 // SPI functions
 #define ARRAY_SIZE(a) (sizeof(a) / sizeof((a)[0]))
@@ -37,7 +39,7 @@ static uint8_t mode;
 static uint8_t bits = 8;
 static uint32_t speed = 48000000;
 static uint16_t delay;
-uint8_t rxXY[1028] = {0, };
+uint8_t rxXY[SEND_DATA_COUNT] = {0, };
 
 bool spiTransfer(int fd)
 {
@@ -81,18 +83,10 @@ bool spiTransfer(int fd)
 
     // to fill in the X-Y array
     rx[0] = rx[0] & 0xf;    // ç»éªŒæ³•åˆ™ï¼Œæ‰£é™¤é«˜ä½
-    if(j == 0 || j == 514)
-    {
-        rxXY[j] = 0xa5;
-        rxXY[j+1] = 0x5a;
-    }
-    else
-    {
-        rxXY[j] = rx[0];
-        rxXY[j+1] = rx[1];
-    }
+    rxXY[j] = rx[0];
+    rxXY[j+1] = rx[1];
     j = j+2;
-    if(j == 1028)
+    if(j == SEND_DATA_COUNT)
     {
         j = 0;
         startSending = true;
@@ -263,14 +257,18 @@ int wifiSendData(int sockfd)
     int sendCount, totalSendCount = 0;
     ////å‘æœåŠ¡å™¨å‘é€æ•°æ®, 6ä¸ªå­—èŠ‚æ„å‘³ç€åªæœ‰hello!è¢«å‘é€
 reSend:
-    if((sendCount = send(sockfd,rxXY,1028,0))==-1)
+    if((sendCount = send(sockfd,rxXY,SEND_DATA_COUNT,0))==-1)
     {
         perror("send");
         exit(1);
     }
     totalSendCount = totalSendCount + sendCount;
-    printf("sendCount=%d totalSendCount=%d \n", sendCount,totalSendCount);
-    if(totalSendCount < 1028)
+    if(sendCount != 512)
+        printf("---------------------sendCount=%d totalSendCount=%d \n", sendCount,totalSendCount);
+    else
+        printf("sendCount=%d totalSendCount=%d \n", sendCount,totalSendCount);
+
+    if(totalSendCount < SEND_DATA_COUNT)
         goto reSend;
     totalSendCount = 0;
    
diff --git a/tcpServer.c b/tcpServer.c
index 1ee21d8..260074e 100644
--- a/tcpServer.c
+++ b/tcpServer.c
@@ -5,6 +5,8 @@
 #include <sys/types.h>
 #include <sys/socket.h>
 
+#define RECV_DATA_COUNT 512
+
 int main(int argc,char *argv[])
 {
     int sockfd,new_fd;
@@ -65,42 +67,33 @@ int main(int argc,char *argv[])
         {
             ////¶ÁÈ¡¿Í»§¶Ë·¢À´µÄĞÅÏ¢
             unsigned int recvCount, totalrecvCount = 0, rxXY;
-            uint8_t buff[1028];
-            int startIndex;
+            uint8_t buff[RECV_DATA_COUNT];
 
             while(1)
             {
-                memset(buff,0,1028);
+                memset(buff,0,RECV_DATA_COUNT);
                 rxXY = 0;
                 
 Rerecv:
-                if((recvCount = recv(new_fd,buff,1028,0))==-1)
+                if((recvCount = recv(new_fd,buff,RECV_DATA_COUNT,0))==-1)
                 {
                     perror("recv");
                     exit(1);
                 }
                 totalrecvCount = totalrecvCount + recvCount;
-                printf("recvCount=%d totalrecvCount=%d \n", recvCount, totalrecvCount);
-                if(totalrecvCount < 1028)
+                if(totalrecvCount < RECV_DATA_COUNT)
                     goto Rerecv;
 
+                if(recvCount !=512)
+                    printf("--------------------------recvCount=%d totalrecvCount=%d \n", recvCount, totalrecvCount);
+                else
+                    printf("recvCount=%d totalrecvCount=%d \n", recvCount, totalrecvCount);
                 totalrecvCount = 0;
                 for(i=0;i<recvCount;i=i+2)
                 {
                     rxXY = buff[i];
                     rxXY = rxXY<<8 | buff[i+1];
-
-                    if(rxXY == 0xa55a)
-                    {
-                        startIndex = i;
-                        break;
-                    }
-                }
-                for(i=startIndex;i<512;i=i+2)
-                {
-                    rxXY = buff[i];
-                    rxXY = rxXY<<8 | buff[i+1];
-                    printf("(i=%d, %d) ",i-startIndex,rxXY);
+                    printf("(i=%d, %d) ",i,rxXY);
                 }
                 puts("");
             }
